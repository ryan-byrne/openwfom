(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{83:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n(25),i=n.n(a),r=(n(78),n(12)),s=n(42),j=n(23),o=n(14),l=n(19),d=n(11),b=n(31),u=n(29),h=n(8),O=n(7),x=n(10),f=n(9),m=n(18),p=n(47),g=n(38),v=n(73),C=n(1);function y(e){var t=Object(c.useState)(null),n=Object(r.a)(t,2),a=n[0],i=n[1],s=function(e){return i(Object(h.a)(Object(h.a)({},a),{},Object(u.a)({},e.target.id,e.target.value)))};return Object(c.useEffect)((function(){fetch("/api/settings/file").then((function(e){return e.json().then((function(e){return i(e)}))})).catch((function(e){return console.log(e)}))}),[]),Object(C.jsx)("div",{children:a?Object(C.jsxs)(m.a,{children:[Object(C.jsx)(O.a.Group,{as:x.a,className:"mt-3 justify-content-center",children:[["Enter Username","user"],["Enter MouseID","mouse"]].map((function(e,t){var n=Object(r.a)(e,2),c=n[0],a=n[1];return Object(C.jsxs)(O.a.Group,{as:f.a,xs:4,children:[Object(C.jsx)(O.a.Control,{placeholder:c,id:a,onChange:s}),Object(C.jsx)(O.a.Text,{muted:!0,children:a.charAt(0).toUpperCase()+a.slice(1)})]},t)}))}),Object(C.jsxs)(O.a.Group,{as:x.a,className:"justify-content-center",children:[Object(C.jsxs)(O.a.Group,{as:f.a,xs:3,className:"pr-0",children:[Object(C.jsx)(O.a.Control,{type:"number",min:"0",step:"0.01",placeholder:"Enter Length of Run",id:"run_length",value:a.run_length,onChange:s}),Object(C.jsx)(O.a.Text,{muted:!0,children:"Run Duration"})]}),Object(C.jsx)(O.a.Group,{as:f.a,xs:"auto",className:"pl-0",children:Object(C.jsx)(O.a.Control,{as:"select",value:a.run_length_unit,onChange:s,id:"run_length_unit",custom:!0,children:["sec","min","hr"].map((function(e){return Object(C.jsx)("option",{children:e},e)}))})}),Object(C.jsxs)(O.a.Group,{as:f.a,xs:3,children:[Object(C.jsx)(O.a.Control,{type:"number",min:"0",step:"1",placeholder:"Enter Number of Runs",value:a.number_of_runs,onChange:s,id:"number_of_runs"}),Object(C.jsx)(O.a.Text,{muted:!0,children:"Number of Runs"})]})]}),Object(C.jsx)(O.a.Group,{as:x.a,className:"justify-content-center",children:Object(C.jsx)(f.a,{xs:10,children:Object(C.jsxs)(l.a,{variant:"primary",className:"text-center",children:["Files to be Saved to: ",Object(C.jsx)("b",{children:a.directory})]})})}),Object(C.jsx)(x.a,{className:"justify-content-center",children:Object(C.jsxs)(p.a,{children:[Object(C.jsx)(d.a,{variant:"danger",className:"ml-1",onClick:function(e){fetch("/api/settings",{method:"DELETE"}).then((function(e){e.ok}))},children:"Close"}),Object(C.jsxs)(v.a,{variant:"secondary",className:"ml-1",as:p.a,title:"File",children:[Object(C.jsx)(g.a.Item,{eventKey:"1",children:"Save Configuration"}),Object(C.jsx)(g.a.Item,{eventKey:"2",onClick:function(e){fetch("/api/file").then((function(e){return e.json().then((function(e){return console.log(e)}))}))},children:"Load Configuration"}),Object(C.jsx)(g.a.Item,{eventKey:"3",children:"Load Default"}),Object(C.jsx)(g.a.Item,{eventKey:"4",children:"Set to Default"})]}),Object(C.jsx)(d.a,{className:"ml-1",children:"Start Acquisition"})]})})]}):null})}var N=n(28),S=n(65);function T(e){var t=Object(c.useState)([]),n=Object(r.a)(t,2),a=n[0],i=n[1],s=Object(c.useState)(!1),j=Object(r.a)(s,2),O=j[0],p=j[1],g=function(t){i([]),p(!0),fetch("/api/devices/cameras").then((function(t){return t.json().then((function(t){var n=t;Object.values(e.cameras).map((function(e){console.log(e)})),console.log(n),i(n),p(!1)}))}))},v=function(t,n){t.target.textContent="Adding...",t.target.disabled=!0;var c=function(e){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",c=n.length,a=0;a<e;a++)t+=n.charAt(Math.floor(Math.random()*c));return t}(10);fetch("/api/settings/"+c,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(Object(h.a)(Object(h.a)({},a[n]),{},{id:c}))}).then((function(t){return t.json().then((function(t){var r=Object(N.a)(a);r.splice(n,1),i(r),e.setCameras(Object(h.a)(Object(h.a)({},e.cameras),{},Object(u.a)({},c,t)))})).catch((function(e){return console.log(e)}))}))},y=function(t,n){fetch("/api/settings/"+n,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({config:null})}).then((function(t){if(t.ok){var c=Object(h.a)({},e.cameras);delete c[n],e.setCameras(c)}})).catch((function(e){return console.log(e)}))};Object(c.useEffect)((function(){g()}),[]);var T=function(t,n){return Object(C.jsx)(S.a,{className:"text-center",children:Object(C.jsxs)("tbody",{children:[Object(C.jsxs)("tr",{children:[Object(C.jsx)("th",{}),Object(C.jsx)("th",{children:"Interface"}),Object(C.jsx)("th",{children:"Index"}),Object(C.jsx)("th",{})]}),t.map((function(t,c){var a="Add"===n?[v,c]:[y,t.id],i=Object(r.a)(a,2),s=i[0],j=i[1];if("Add"===n&&!Object.values(e.cameras).map((function(e){return e.interface!==t.interface||e.index!==t.index})).every((function(e){return!0===e})))return null;return Object(C.jsxs)("tr",{children:[Object(C.jsx)("td",{children:Object(C.jsx)(d.a,{onClick:function(e){return s(e,j)},children:n})}),Object(C.jsx)("td",{children:t.interface}),Object(C.jsx)("td",{children:t.index}),Object(C.jsx)("td",{children:Object(C.jsx)(d.a,{variant:"secondary",children:"Show Info"})})]},c)}))]})})};return Object(C.jsx)("div",{children:Object(C.jsxs)(o.a,{show:e.show,onHide:e.hideEditing,children:[Object(C.jsx)(o.a.Header,{closeButton:!0,children:Object(C.jsx)(o.a.Title,{children:"Choosing Cameras"})}),Object(C.jsx)(o.a.Body,{children:Object(C.jsxs)(m.a,{children:[Object(C.jsxs)(x.a,{className:"mb-3",children:[Object(C.jsx)(f.a,{children:Object(C.jsx)(o.a.Title,{children:"Available Cameras"})}),Object(C.jsx)(f.a,{children:Object(C.jsx)(d.a,{onClick:g,children:"Search"})})]}),Object(C.jsxs)(x.a,{className:"justify-content-center",children:[O?Object(C.jsxs)(l.a,{variant:"info",children:[Object(C.jsx)(b.a,{animation:"border",size:"sm"}),"Searching for Cameras..."]}):null,a.length>0?T(a,"Add"):null]}),Object(C.jsx)(x.a,{className:"mb-3",children:Object(C.jsx)(f.a,{children:Object(C.jsx)(o.a.Title,{children:"Current Cameras"})})}),Object(C.jsx)(x.a,{className:"justify-content-center",children:Object.values(e.cameras).length>0?T(Object.values(e.cameras),"Remove"):Object(C.jsx)(l.a,{variant:"warning",children:"No Cameras Added"})})]})})]})})}var w=n(66),A=n(34),k=n(52),E=function(e){var t=Object(c.useState)({draw:!1,x:0,y:0,ix:0,iy:0}),n=Object(r.a)(t,2),a=n[0],i=n[1],s=Object(c.useState)({height:null,width:null,objectFit:"cover"}),j=Object(r.a)(s,2),o=j[0],l=j[1],d=Object(c.useRef)(),b=Object(c.useRef)();Object(c.useRef)();return Object(c.useEffect)((function(){var e=d.current,t=e.getContext("2d"),n=b.current,c=n.height,i=n.width;e.height=c,e.width=i,t.clearRect(0,0,e.width,e.height),t.strokeStyle="red";var r=a.ix,s=a.iy,j=a.x,o=a.y;a.draw&&t.strokeRect(r,s,j-r,o-s)})),Object(c.useEffect)((function(){b.current.naturalHeight,b.current.height}),[e.camera.aoi]),Object(C.jsxs)("div",{onMouseDown:function(e){var t=d.current.getBoundingClientRect(),n=t.left,c=t.top,a=e.clientX,r=e.clientY;i({ix:a-n,iy:r-c,x:a-n,y:r-c,draw:!0})},onMouseMove:function(e){var t=d.current.getBoundingClientRect(),n=t.left,c=t.top,r=e.clientX,s=e.clientY;a.draw&&i(Object(h.a)(Object(h.a)({},a),{},{x:r-n,y:s-c}))},onMouseUp:function(t){var n,c=b.current,r=c.height/c.naturalHeight,s=a.x,j=a.y,d=a.iy,u=a.ix,O=e.camera.aoi,x=O.fullHeight,f=O.fullWidth;2===t.button?n=Object(h.a)(Object(h.a)({},e.camera.aoi),{},{height:x,width:f,x:0,y:0}):(l(Object(h.a)(Object(h.a)({},o),{},{height:Math.abs(j-d)+"px",width:Math.abs(s-u)+"px"})),n=Object(h.a)(Object(h.a)({},e.camera.aoi),{},{height:parseInt(Math.abs(j-d)/r),width:parseInt(Math.abs(s-u)/r),x:parseInt(Math.min(s,u)/r),y:parseInt(Math.min(j,d)/r)})),e.setCamera(Object(h.a)(Object(h.a)({},e.camera),{},{aoi:n})),i({draw:!1,x:0,y:0,ix:0,iy:0})},children:[Object(C.jsx)("canvas",{ref:d,onContextMenu:function(e){return e.preventDefault()},className:"position-absolute",style:o}),Object(C.jsx)(w.a,{ref:b,src:"/api/feed/"+e.camera.id,fluid:!0,draggable:!1,style:o})]})};function R(e){var t=Object(c.useState)({aoi:{binning:null}}),n=Object(r.a)(t,2),a=n[0],i=n[1],l=function(e){if("primary"===e.target.id)i(Object(h.a)(Object(h.a)({},a),{},{primary:e.target.checked}));else{var t,n,c=a.aoi,r=c.fullWidth,s=c.fullHeight,j=c.x,o=c.y,l=c.height,d=c.width;e.target.checked?(t=(r-d)/2,n=(s-l)/2):(t=j,n=o),i(Object(h.a)(Object(h.a)({},a),{},{aoi:Object(h.a)(Object(h.a)({},a.aoi),{},{centered:e.target.checked,x:t,y:n})}))}},b=function(e){"binning"===e.target.id?i(Object(h.a)(Object(h.a)({},a),{},{aoi:Object(h.a)(Object(h.a)({},a.aoi),{},{binning:e.target.value})})):i(Object(h.a)(Object(h.a)({},a),{},{dtype:e.target.value}))},p=function(e){i(Object(h.a)(Object(h.a)({},a),{},{aoi:Object(h.a)(Object(h.a)({},a.aoi),{},Object(u.a)({},e.target.id,e.target.value))}))};return Object(c.useEffect)((function(){i(Object(h.a)({},e.cameras[e.selected]))}),[e.selected]),Object(C.jsx)("div",{children:Object(C.jsx)(o.a,{show:null!==e.selected,onHide:e.onHide,size:"xl",children:Object(C.jsxs)("div",{children:[Object(C.jsx)(o.a.Header,{closeButton:!0,children:Object(C.jsx)(o.a.Title,{children:"Configuring Camera"})}),a.aoi?Object(C.jsxs)(o.a.Body,{children:[Object(C.jsx)(x.a,{className:"justify-content-center",children:Object(C.jsx)(E,{camera:a,setCamera:i})}),Object(C.jsxs)(s.a,{className:"mt-3",children:[Object(C.jsx)(j.a,{eventKey:"aoiTab",title:"AOI",children:Object(C.jsxs)(m.a,{children:[Object(C.jsxs)(x.a,{className:"justify-content-center mt-3 align-items-center",xs:1,sm:4,children:[Object(C.jsxs)(A.a,{as:f.a,children:[Object(C.jsx)(A.a.Text,{children:"Binning"}),Object(C.jsx)(k.a,{as:"select",custom:!0,className:"text-center",value:a.aoi.binning,onChange:b,id:"binning",children:["1x1","2x2","4x4","8x8"].map((function(e){return Object(C.jsx)("option",{children:e},e)}))})]}),Object(C.jsx)(f.a,{className:"text-center",children:Object(C.jsx)(O.a.Check,{type:"switch",id:"centered",label:"Centered",value:a.aoi.centered,onChange:l})})]}),Object(C.jsx)(x.a,{className:"justify-content-center mt-3",xs:2,sm:6,children:["height","width","x","y"].map((function(e){return Object(C.jsxs)(O.a.Group,{as:f.a,children:[Object(C.jsx)(O.a.Control,{type:"number",min:"0",step:"1",className:"text-center",value:a.aoi[e],id:e,onChange:p}),Object(C.jsx)(O.a.Text,{muted:!0,children:e.charAt(0).toUpperCase()+e.slice(1)})]},e)}))})]})}),Object(C.jsx)(j.a,{eventKey:"framerateKey",title:"Framerate",children:Object(C.jsx)(m.a,{className:"mt-3",children:Object(C.jsxs)(x.a,{className:"align-items-center",children:[Object(C.jsx)(f.a,{className:"text-center",children:Object(C.jsx)(O.a.Check,{type:"switch",label:"Primary",value:a.primary,onChange:l,id:"primary"})}),Object(C.jsxs)(f.a,{className:"justify-content-center",children:[Object(C.jsx)(O.a.Control,{type:"number",min:"0",step:"0.01",value:a.framerate,disabled:!a.primary,onChange:p}),Object(C.jsx)(O.a.Text,{muted:!0,children:"Framerate"})]})]})})}),Object(C.jsx)(j.a,{eventKey:"pixelKey",title:"Pixel Format",children:Object(C.jsx)(m.a,{children:Object(C.jsxs)(O.a.Group,{as:x.a,className:"mt-3",children:[Object(C.jsxs)(O.a.Group,{as:f.a,children:[Object(C.jsx)(O.a.Control,{as:"select",custom:!0,value:a.dtype,onChange:b,children:["8-bit","12-bit","16-bit","32-bit"].map((function(e){return Object(C.jsx)("option",{children:e},e)}))}),Object(C.jsx)(O.a.Text,{muted:!0,children:"Bits Per Pixel"})]}),Object(C.jsxs)(O.a.Group,{as:f.a,children:[Object(C.jsxs)(A.a.Prepend,{children:[Object(C.jsx)(A.a.Text,{children:"4898"}),Object(C.jsx)(A.a.Text,{children:"MB"})]}),Object(C.jsx)(O.a.Text,{muted:!0,children:"MB per Frame"})]})]})})})]})]}):null,Object(C.jsxs)(o.a.Footer,{children:[Object(C.jsx)(d.a,{variant:"secondary",onClick:e.onHide,children:"Close"}),Object(C.jsx)(d.a,{onClick:function(){return console.log(a)},children:"Save Changes"})]})]})})})}function G(e){var t=Object(c.useState)({}),n=Object(r.a)(t,2),a=n[0],i=n[1],s=Object(c.useState)(!1),j=Object(r.a)(s,2),o=j[0],l=j[1],b=Object(c.useState)(null),u=Object(r.a)(b,2),h=u[0],O=u[1];return Object(c.useEffect)((function(){fetch("/api/settings/cameras").then((function(e){return e.json().then((function(e){return i(e)}))})).catch((function(e){return console.log(e)}))}),[]),Object(C.jsx)("div",{className:"mt-3",children:Object(C.jsxs)(m.a,{className:"text-center h-100",children:[Object(C.jsx)(x.a,{className:"align-items-center",children:Object.keys(a).map((function(e,t){var n=a[e];return Object(C.jsx)(f.a,{children:Object(C.jsx)(w.a,{src:"api/feed/"+n.id,fluid:!0,style:{cursor:"pointer"},onClick:function(){return O(n.id)},alt:n.id})},t)}))}),Object(C.jsx)(x.a,{className:"mt-3",children:Object(C.jsx)(f.a,{children:Object(C.jsx)(d.a,{onClick:function(){return l(!0)},children:0===a.length?"Add Camera(s)":"Edit Camera(s)"})})}),Object(C.jsx)(T,{cameras:a,setCameras:i,hideEditing:function(){return l(!1)},show:o}),Object(C.jsx)(R,{cameras:a,setCameras:i,selected:h,onHide:function(){return O(null)}})]})})}var D=function(e){var t=function(t,n,c){var a=Object(N.a)(e.leds);a[t][c]=n,e.setConfig(Object(h.a)(Object(h.a)({},e.config),{},{leds:a}))};return Object(C.jsx)(O.a,{children:Object(C.jsxs)(m.a,{children:[Object(C.jsx)(x.a,{}),Object(C.jsxs)(x.a,{children:[Object(C.jsx)(f.a,{}),Object(C.jsxs)(f.a,{children:[Object(C.jsx)(O.a.Control,{type:"number",min:"0",step:"1",placeholder:"Trigger Pin",onChange:function(t){return n=t.target.value,e.setConfig(Object(h.a)(Object(h.a)({},e.config),{},{trig:n}));var n}}),Object(C.jsx)(O.a.Text,{className:"text-muted",children:"Set the Trigger Pin"})]}),Object(C.jsx)(f.a,{})]}),e.config.leds.map((function(e,n){return Object(C.jsxs)(x.a,{children:[Object(C.jsx)(f.a,{children:Object(C.jsx)(O.a.Control,{type:"text",placeholder:"LED Name",onChange:function(e){return t(n,e.target.value,"name")}})}),Object(C.jsx)(f.a,{children:Object(C.jsx)(O.a.Control,{type:"number",min:"0",step:"1",placeholder:"LED Pin",onChange:function(e){return t(n,e.target.value,"pin")}})}),Object(C.jsx)(f.a,{children:Object(C.jsx)(d.a,{variant:"secondary",children:"Remove"})}),Object(C.jsx)(f.a,{children:Object(C.jsx)(d.a,{variant:"primary",children:"Test"})})]},n)})),Object(C.jsxs)(x.a,{children:[Object(C.jsx)(f.a,{}),Object(C.jsx)(f.a,{children:Object(C.jsx)(d.a,{onClick:function(t){e.setConfig(Object(h.a)(Object(h.a)({},e.config),{},{leds:[].concat(Object(N.a)(e.config.leds),[{name:"New Lew",pin:0}])}))},children:"Add LED"})}),Object(C.jsx)(f.a,{})]}),Object(C.jsx)(O.a.Text,{className:"text-muted",children:"Configure LEDs"})]})})},I=function(e){var t=function(t,n,c){var a=Object(N.a)(e.config.stim);"type"===c&&n.target.value!==e.stim[t].type&&("4PinStepper"===n.target.value?a[t].pins.push("0","1"):a[t].pins.splice(-2,2)),a[t][c]=n.target.value,e.setConfig(Object(h.a)(Object(h.a)({},e.config),{},{stim:a}))};return Object(C.jsxs)(O.a,{children:[Object(C.jsx)(O.a.Group,{as:x.a}),Object(C.jsx)(O.a.Group,{controlId:"stims",children:e.config.stim.map((function(n,c){return Object(C.jsxs)(m.a,{children:[Object(C.jsxs)(x.a,{children:[Object(C.jsx)(f.a,{children:Object(C.jsx)(O.a.Control,{type:"text",placeholder:"Stim Name",onChange:function(e){return t(c,e,"name")}})}),Object(C.jsx)(f.a,{children:Object(C.jsxs)(O.a.Control,{onChange:function(e){return t(c,e,"type")},as:"select",children:[Object(C.jsx)("option",{children:"2PinStepper"}),Object(C.jsx)("option",{children:"4PinStepper"})]})}),Object(C.jsx)(f.a,{children:Object(C.jsx)(d.a,{variant:"secondary",onClick:function(){return function(t){var n=Object(N.a)(e.config.stim);n.splice(t,1),e.setConfig(Object(h.a)(Object(h.a)({},e.config),{},{stim:n}))}(c)},children:"Remove"})}),Object(C.jsx)(f.a,{children:Object(C.jsx)(d.a,{variant:"primary",children:"Test"})})]},c),n.pins.map((function(t,n){return Object(C.jsx)(x.a,{children:Object(C.jsx)(O.a.Control,{type:"number",min:"0",step:"1",placeholder:"Pin",onChange:function(t){return function(t,n,c){var a=Object(N.a)(e.config.stim);a[n].pins[c]=t.target.value,e.setConfig(Object(h.a)(Object(h.a)({},e.config),{},{stim:a}))}(t,c,n)}})})}))]})}))}),Object(C.jsxs)(O.a.Group,{children:[Object(C.jsxs)(x.a,{children:[Object(C.jsx)(f.a,{}),Object(C.jsx)(f.a,{children:Object(C.jsx)(d.a,{onClick:function(t){e.setConfig(Object(h.a)(Object(h.a)({},e.config),{},{stim:[].concat(Object(N.a)(e.config.stim),[{name:"",type:"2PinStepper",pins:["0","1"]}])}))},children:"Add Stim"})}),Object(C.jsx)(f.a,{})]}),Object(C.jsx)(x.a,{children:Object(C.jsx)(f.a,{children:Object(C.jsx)(O.a.Text,{className:"text-muted",children:"Configure Stim"})})})]})]})},P=function(e){return Object(C.jsxs)(O.a,{children:[Object(C.jsx)(O.a.Group,{as:x.a}),Object(C.jsx)(O.a.Group,{controlId:"stims",children:e.config.daq.map((function(t,n){return Object(C.jsxs)(x.a,{children:[Object(C.jsx)(f.a,{children:Object(C.jsx)(O.a.Control,{type:"text",placeholder:"DAQ Name"})}),Object(C.jsx)(f.a,{children:Object(C.jsx)(O.a.Control,{type:"number",min:"0",step:"1",placeholder:"DAQ Pin"})}),Object(C.jsx)(f.a,{children:Object(C.jsx)(d.a,{onClick:function(t){return function(t){var n=e.config.daq;n.splice(t,1),e.setConfig(Object(h.a)(Object(h.a)({},e.config),{},{daq:n}))}(n)},variant:"secondary",children:"Remove"})}),Object(C.jsx)(f.a,{children:Object(C.jsx)(d.a,{variant:"primary",children:"Test"})})]},n)}))}),Object(C.jsxs)(O.a.Group,{children:[Object(C.jsx)(x.a,{children:Object(C.jsx)(f.a,{children:Object(C.jsx)(d.a,{onClick:function(t){return e.setConfig(Object(h.a)(Object(h.a)({},e.config),{},{daq:[{name:"New DAQ",pin:0}]}))},children:"Add DAQ"})})}),Object(C.jsx)(x.a,{children:Object(C.jsx)(f.a,{children:Object(C.jsx)(O.a.Text,{className:"text-muted",children:"Configure Data Acquisition"})})})]})]})};function K(e){var t=Object(c.useState)(!1),n=Object(r.a)(t,2),a=n[0],i=(n[1],Object(c.useState)({device:"arduino",leds:[],daq:[],port:null,trig:null,stim:[]})),l=Object(r.a)(i,2),u=l[0],h=l[1];return Object(C.jsxs)(o.a,{show:e.show,onHide:e.handleConfig,children:[Object(C.jsx)(o.a.Header,{closeButton:!0,children:Object(C.jsx)(o.a.Title,{children:"Arduino Configuration"})}),Object(C.jsx)(o.a.Body,{children:Object(C.jsxs)(s.a,{children:[Object(C.jsx)(j.a,{eventKey:"strobingTab",title:"Strobing",children:Object(C.jsx)(D,{config:u,setConfig:h})}),Object(C.jsx)(j.a,{eventKey:"stimTab",title:"Stim",children:Object(C.jsx)(I,{config:u,setConfig:h})}),Object(C.jsx)(j.a,{eventKey:"daqTab",title:"Data Acquisition",children:Object(C.jsx)(P,{config:u,setConfig:h})})]})}),Object(C.jsxs)(o.a.Footer,{children:[Object(C.jsx)(d.a,{variant:"secondary",onClick:e.handleConfig,children:"Close"}),a?Object(C.jsxs)(d.a,{variant:"primary",disabled:!0,children:[Object(C.jsx)(b.a,{as:"span",size:"sm",animation:"border",role:"status"}),"Sending to Arduino"]}):Object(C.jsx)(d.a,{variant:"primary",onClick:function(){fetch("/api/connection/",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(u)}).then((function(e){return e.json().then((function(e){return console.log(e)})).catch((function(e){return console.log(e)}))})),e.handleConfig()},children:"Save Changes"})]})]})}function M(e){var t=Object(c.useState)({}),n=Object(r.a)(t,2),a=n[0],i=n[1],s=Object(c.useState)([]),j=Object(r.a)(s,2),o=j[0],u=j[1],h=Object(c.useState)(0),g=Object(r.a)(h,2),v=g[0],y=g[1],N=Object(c.useState)(null),T=Object(r.a)(N,2),w=T[0],A=T[1],k=Object(c.useState)(!1),E=Object(r.a)(k,2),R=E[0],G=E[1],D=Object(c.useState)(!1),I=Object(r.a)(D,2),P=I[0],M=I[1],H=function(){return G(!R)},B=function(){u([]),fetch("/api/devices/arduinos").then((function(e){return e.json().then((function(e){0===e.length?A(Object(C.jsx)(l.a,{variant:"danger",children:"No Arduinos Found"})):(A(null),u(e))}))}))};return Object(c.useEffect)((function(){0===o.length||function(){var e=o[v];A(Object(C.jsxs)(l.a,{variant:"warning",children:[Object(C.jsx)(b.a,{animation:"border",className:"mr-3",size:"sm"}),"Connecting to ",Object(C.jsx)("b",{children:e.device}),"..."]}));var t={key:"arduino",config:{port:e.device},command:"open"};fetch("/api/settings/arduino",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(t){return t.json().then((function(t){t.firmware_version?(i(t),A(Object(C.jsx)(l.a,{variant:"success",children:Object(C.jsxs)("p",{children:["Successfully connected to the Arduino at ",Object(C.jsx)("b",{children:e.device})]})}))):A(Object(C.jsx)(l.a,{variant:"danger",children:Object(C.jsxs)("p",{children:[Object(C.jsx)("b",{children:"ERROR:"})," Arduino at ",Object(C.jsx)("b",{children:e.device})," does not have compatible firmware.",Object(C.jsx)(d.a,{className:"ml-3",children:"Upload Firmware..."})]})}))}))}))}()}),[o,v]),Object(c.useEffect)((function(){B()}),[]),Object(C.jsxs)(m.a,{children:[Object(C.jsxs)(x.a,{className:"mt-3 justify-content-center",children:[Object(C.jsxs)(O.a.Group,{as:f.a,sm:3,children:[Object(C.jsx)(O.a.Control,{as:"select",custom:!0,children:0===o.length?Object(C.jsx)("option",{disabled:!0,defaultValue:!0,children:"No Arduinos Found."}):o.map((function(e,t){return Object(C.jsxs)("option",{onClick:function(){return y(t)},children:[e.product," - ",e.device]},t)}))}),Object(C.jsx)(O.a.Text,{muted:!0,children:"Select an Arduino"})]}),Object(C.jsx)(O.a.Group,{as:f.a,sm:4,children:Object(C.jsxs)(p.a,{children:[Object(C.jsx)(d.a,{variant:"secondary",onClick:function(){return B()},children:"Refresh"}),Object(C.jsx)(d.a,{variant:"secondary",onClick:function(){return M(!P)},disabled:0===o.length,children:P?"Hide Info":"Show Info"}),Object(C.jsx)(d.a,{variant:"primary",disabled:!a.firmware_version,onClick:H,children:"Configure"})]})})]}),Object(C.jsx)(K,{port:o[v],show:R,handleConfig:H}),w,P?Object(C.jsx)(S.a,{children:Object(C.jsx)("tbody",{children:Object.keys(o[v]).map((function(e,t){return Object(C.jsxs)("tr",{children:[Object(C.jsx)("th",{children:e.charAt(0).toUpperCase()+e.slice(1)}),Object(C.jsx)("td",{children:o[v][e]})]},t)}))})}):null]})}function H(){var e=Object(c.useState)({}),t=Object(r.a)(e,2),n=(t[0],t[1],Object(c.useState)({})),a=Object(r.a)(n,2),i=(a[0],a[1],Object(c.useState)(!1)),o=Object(r.a)(i,2);o[0],o[1];return Object(C.jsx)("div",{children:Object(C.jsxs)(s.a,{defaultActiveKey:"profile",id:"uncontrolled-tab-example",children:[Object(C.jsx)(j.a,{eventKey:"runTab",title:"Run",children:Object(C.jsx)(y,{})}),Object(C.jsx)(j.a,{eventKey:"camerasTab",title:"Cameras",children:Object(C.jsx)(G,{})}),Object(C.jsx)(j.a,{eventKey:"arduinoTab",title:"Arduino",children:Object(C.jsx)(M,{})})]})})}i.a.render(Object(C.jsx)(H,{}),document.getElementById("root"))}},[[83,1,2]]]);
//# sourceMappingURL=main.b81edf06.chunk.js.map